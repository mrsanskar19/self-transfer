(()=>{var e={};e.id=144,e.ids=[144],e.modules={440:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});var s=t(1658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},620:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(2614).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1404:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>f});var s=t(687),a=t(3210),i=t(6189),d=t(4493),n=t(9523),l=t(1516);let o=(0,t(2614).A)("ShieldX",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]]);var c=t(2850),p=t(2963),u=t(620),m=t(1821),x=t(9867);function f(){let{id:e}=(0,i.useParams)(),r=(0,i.useRouter)(),{toast:t}=(0,x.dj)(),[f,h]=(0,a.useState)(null),[v,y]=(0,a.useState)(!0),[g,j]=(0,a.useState)(null),w=async()=>{if(!f||!f.url||!f.name)return;let s=document.createElement("a");s.href=f.url,s.setAttribute("download",f.name),document.body.appendChild(s),s.click(),s.parentNode?.removeChild(s),t({title:"Downloaded",description:"File downloaded. It has now been deleted from the vault."});try{await fetch(`/api/messages/${e}`,{method:"DELETE"})}catch(e){console.error("Failed to delete file from backend",e)}j("This link is now invalid. You will be redirected."),setTimeout(()=>{r.push("/")},3e3)};return(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[calc(100vh-3.5rem)] py-12 px-4 sm:px-6 lg:px-8 bg-background",children:(0,s.jsxs)(d.Zp,{className:"w-full max-w-md",children:[(0,s.jsxs)(d.aR,{children:[(0,s.jsx)(d.ZB,{className:"text-center text-2xl font-bold",children:"Ephemeral Vault"}),(0,s.jsx)(d.BT,{className:"text-center",children:"You have received a temporary file."})]}),(0,s.jsx)(d.Wu,{children:v?(0,s.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,s.jsx)(l.A,{className:"h-12 w-12 animate-spin text-primary"})}):g?(0,s.jsxs)(m.Fc,{variant:"destructive",children:[(0,s.jsx)(o,{className:"h-4 w-4"}),(0,s.jsx)(m.XL,{children:"Access Denied"}),(0,s.jsx)(m.TN,{children:g})]}):f?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"p-4 border rounded-lg flex items-center gap-4",children:[(0,s.jsx)(c.A,{className:"h-8 w-8 text-primary flex-shrink-0"}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("p",{className:"font-semibold truncate",children:f.name}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Expires: ",new Date(new Date(f.uploadedAt).getTime()+36e5).toLocaleTimeString()]})]})]}),(0,s.jsxs)(m.Fc,{children:[(0,s.jsx)(p.A,{className:"h-4 w-4"}),(0,s.jsx)(m.XL,{children:"Heads up!"}),(0,s.jsx)(m.TN,{children:"This file will be permanently deleted from the vault after you download it."})]}),(0,s.jsxs)(n.$,{className:"w-full",onClick:w,children:[(0,s.jsx)(u.A,{className:"mr-2"}),"Download and Invalidate Link"]})]}):null})]})})}},1821:(e,r,t)=>{"use strict";t.d(r,{Fc:()=>l,TN:()=>c,XL:()=>o});var s=t(687),a=t(3210),i=t(4224),d=t(4780);let n=(0,i.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=a.forwardRef(({className:e,variant:r,...t},a)=>(0,s.jsx)("div",{ref:a,role:"alert",className:(0,d.cn)(n({variant:r}),e),...t}));l.displayName="Alert";let o=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("h5",{ref:t,className:(0,d.cn)("mb-1 font-medium leading-none tracking-tight",e),...r}));o.displayName="AlertTitle";let c=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,d.cn)("text-sm [&_p]:leading-relaxed",e),...r}));c.displayName="AlertDescription"},2522:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/self-transfer/src/app/shared/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/self-transfer/src/app/shared/[id]/page.tsx","default")},2850:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(2614).A)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]])},2963:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(2614).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4096:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>d.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>o});var s=t(5239),a=t(8088),i=t(8170),d=t.n(i),n=t(893),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);t.d(r,l);let o={children:["",{children:["shared",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2522)),"/home/user/self-transfer/src/app/shared/[id]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,4431)),"/home/user/self-transfer/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/user/self-transfer/src/app/shared/[id]/page.tsx"],p={require:t,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/shared/[id]/page",pathname:"/shared/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},4493:(e,r,t)=>{"use strict";t.d(r,{BT:()=>o,Wu:()=>c,ZB:()=>l,Zp:()=>d,aR:()=>n});var s=t(687),a=t(3210),i=t(4780);let d=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));d.displayName="Card";let n=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...r}));n.displayName="CardHeader";let l=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));l.displayName="CardTitle";let o=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...r}));o.displayName="CardDescription";let c=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",e),...r}));c.displayName="CardContent",a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter"},6745:(e,r,t)=>{Promise.resolve().then(t.bind(t,2522))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9398:(e,r,t)=>{Promise.resolve().then(t.bind(t,1404))},9551:e=>{"use strict";e.exports=require("url")}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[719,96,658,75],()=>t(4096));module.exports=s})();